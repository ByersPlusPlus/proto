syntax = "proto3";
package userservice;
import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";

service UserService {
    rpc GetUserById (BPPUserById) returns (BPPUser);
    rpc FilterUsers (BPPUserFilters) returns (BPPUsers);
    rpc UpdateUser (BPPUser) returns (BPPUser);
    rpc UpdateUsers (BPPUsers) returns (BPPUsers);
    rpc DeleteUser (BPPUser) returns (google.protobuf.Empty);
    rpc DeleteUsers (BPPUsers) returns (google.protobuf.Empty);
    rpc CreateUser(BPPUser) returns (BPPUser);
}

message BPPUser {
    string channelId = 1;
    string displayName = 2;
    google.protobuf.Duration hours = 3;
    int64 money = 4;
    google.protobuf.Timestamp first_seen_at = 5;
    google.protobuf.Timestamp last_seen_at =  6;
}

message BPPUsers {
    repeated BPPUser BPPUser = 1;
}

message BPPUserById {
    string channelId = 1;
}

message BPPUserFilter {
    oneof filter {
        string channelId = 1;
        string name = 2;
        double hours = 3;
        int64 money = 4;
    }
}

message BPPUserFilters {
    enum SortingFields {
        DEFAULT = 0;
        HOURS_DESC = 1;
        HOURS_ASC = 2;
        MONEY_DESC = 3;
        MONEY_ASC = 4;
    }

    repeated BPPUserFilter filters = 1;
    SortingFields sorting = 2;
}